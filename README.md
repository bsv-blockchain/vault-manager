# BSV Vault Manager Suite

The BSV Vault Manager Suite is an offline-first React application for operating a high-assurance BSV cold vault. The software enforces the security posture described in the operator’s manual: no automatic network flows, user-controlled SPV validation, Atomic BEEF (BRC-95) for all transaction interchange, and a hardened operational workflow around dual control and auditable logs.

## Operational Manual

- The canonical procedures for vault setup, custody, signing, certification, and media handling live in `MANUAL.md`. Treat that document as the source of truth for physical, environmental, and human-process controls.
- README and MANUAL are intentionally aligned. The sections below surface the engineering details that support the manual and point to the exact developer steps required to keep the software supply chain congruent with the operational policies.

## System Overview

- **Vault brain:** A TypeScript `Vault` class keeps encrypted state (keys, UTXOs, transaction history, BEEF store, attestation logs) and implements `ChainTracker` so all SPV verification requires operator-supplied block headers.
- **Atomic BEEF only:** Incoming and outgoing flows rely on BRC-95 containers so every transaction carries the proofs required for local verification without trusting remote peers.
- **Performative certification:** Saving the vault is a multi-step attestation that captures hashes, replacement policies, and dual signatures per the manual.
- **Custom UI stack:** The React front end ships its own modal/dialog system instead of browser primitives to prevent spoofing and keep user focus during critical steps.
- **Zero automatic networking:** The app never reaches out to the network; all blockchain data and header confirmations come from the operators.

## Project Layout

- `frontend/` – Vite/React application source, build tooling, and the operator’s manual.
- `frontend/build/` – Production bundle generated by Vite. This is what you move onto removable media for the air-gapped environment.
- `MANUAL.md` – Comprehensive operational guide governing how the suite is used in production.

## Development Setup

- **Prerequisites:** Node.js 20.19+ (or 22.12+), npm 10+, and a cloned copy of this repository. The Vite toolchain warns on earlier Node 20.x releases.
- **Install dependencies:** From `frontend/`, run `npm ci` to install deterministic dependencies defined in `package-lock.json`.
- **Environment hygiene:** Development work happens on a network-connected staging machine. Production operations remain on strictly air-gapped hardware per the manual.

```bash
cd frontend
npm ci
```

## Local Development Workflow

- `npm run start` – Launches the Vite dev server (default `http://localhost:8080`). Use only on a development workstation; production machines stay offline.
- `npm run build:dev` – Produces a non-minified bundle useful for debugging while still exercising the production build path.
- `npm run preview` – Serves the last build with Vite’s preview server so you can smoke-test the production bundle before sealing it for transfer.

## Building for an Air-Gapped Deployment

1. **Prepare on the networked build box**
   - `cd frontend`
   - `npm ci` (skip if dependencies are already installed and vetted)
   - `npm run build -- --base ./` to emit a relative-path bundle under `frontend/build/` that can be hosted from removable media without network access.
2. **Verify artefacts**
   - Optionally run `npm run preview` locally to confirm the UI before sealing media.
   - Generate and record hashes: `cd build && shasum -a 256 * assets/* > SHA256SUMS.txt`.
3. **Transfer to the vault environment**
   - Follow the manual’s removable-media process: scan the “IN” drive with two engines, record the drive serial, apply tamper seals, and log every hand-off.
4. **Operate inside the air gap**
   - On the offline workstation, verify the recorded checksums before use.
   - Serve the bundle with an approved local-only static server (for example, `python3 -m http.server 4173` from the `build/` directory) or load via a trusted kiosk per Section 7 of the manual. No outbound networking is required; all dependencies are bundled.
5. **Post-session handling**
   - Export vault updates, logs, and Atomic BEEF artefacts following the certification, hashing, and media sanitization steps defined in Sections 8–13 of the manual.

These build steps ensure the software artefacts respect the same dual-control, hash-recording, and clean-media standards that govern vault operations.

## Operational Alignment Notes

- The software assumes operators supply block headers from at least two independent sources, matching the manual’s SPV requirements.
- Two-person control is not optional: all sensitive actions (password entry, signing, saving, media handling) need dual custody and video logging as prescribed.
- Always update `MANUAL.md` alongside procedural changes to keep this README and the operational guide synchronized.

## License

Open BSV
